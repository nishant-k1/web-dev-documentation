# âœ… Must-Know `JSON` Object

`JSON` (JavaScript Object Notation) is a built-in object for serializing and deserializing JavaScript values to/from JSON format.

---

## JSON Methods

### `JSON.stringify(value, replacer?, space?)` â­â­â­

Converts JavaScript value to JSON string.

```js
const obj = { name: "John", age: 30 };
JSON.stringify(obj); // '{"name":"John","age":30}'
```

### `JSON.parse(text, reviver?)` â­â­â­

Converts JSON string to JavaScript value.

```js
const jsonString = '{"name":"John","age":30}';
JSON.parse(jsonString); // { name: 'John', age: 30 }
```

---

## JSON.stringify() Details

### Basic Usage

```js
JSON.stringify({ name: "John", age: 30 }); // '{"name":"John","age":30}'
JSON.stringify([1, 2, 3]); // '[1,2,3]'
JSON.stringify("hello"); // '"hello"'
JSON.stringify(42); // '42'
JSON.stringify(true); // 'true'
JSON.stringify(null); // 'null'
```

### Omitted Values

```js
// Functions and undefined are omitted
JSON.stringify({
  name: "John",
  age: undefined,
  greet: function () {},
}); // '{"name":"John"}'
```

### With Replacer Function

```js
const obj = { name: "John", age: 30, secret: "hidden" };

JSON.stringify(obj, (key, value) => {
  if (key === "secret") return undefined; // Omit secret
  return value;
}); // '{"name":"John","age":30}'
```

### With Replacer Array (Whitelist)

```js
const obj = { name: "John", age: 30, secret: "hidden" };
JSON.stringify(obj, ["name", "age"]); // '{"name":"John","age":30}'
```

### With Space (Pretty Printing)

```js
const obj = { name: "John", age: 30 };
JSON.stringify(obj, null, 2);
// '{\n  "name": "John",\n  "age": 30\n}'
```

---

## JSON.parse() Details

### Basic Usage

```js
JSON.parse('{"name":"John","age":30}'); // { name: 'John', age: 30 }
JSON.parse("[1,2,3]"); // [1, 2, 3]
JSON.parse('"hello"'); // "hello"
JSON.parse("42"); // 42
```

### With Reviver Function

```js
const json = '{"date":"2023-01-01","value":42}';

JSON.parse(json, (key, value) => {
  if (key === "date") {
    return new Date(value);
  }
  return value;
});
// { date: Date object, value: 42 }
```

---

## What Gets Serialized

### âœ… Serialized

- Objects, arrays, strings, numbers, booleans, null
- Date objects (converted to string)
- Arrays with undefined (converted to null)

### âŒ Not Serialized (Omitted)

- Functions
- `undefined`
- Symbols

### âš ï¸ Special Cases

```js
// Date â†’ String
JSON.stringify(new Date()); // '"2023-01-01T00:00:00.000Z"'

// Undefined in arrays â†’ null
JSON.stringify([1, undefined, 3]); // '[1,null,3]'

// Circular references â†’ Error
const obj = {};
obj.self = obj;
JSON.stringify(obj); // TypeError: Converting circular structure to JSON
```

---

## Common Use Cases

### 1. API Communication

```js
// Sending data
fetch("/api/users", {
  method: "POST",
  body: JSON.stringify({ name: "John", age: 30 }),
  headers: { "Content-Type": "application/json" },
});

// Receiving data
const response = await fetch("/api/users");
const data = await response.json(); // Automatically uses JSON.parse()
```

### 2. Local Storage

```js
// Save
const user = { name: "John", age: 30 };
localStorage.setItem("user", JSON.stringify(user));

// Load
const userJson = localStorage.getItem("user");
const user = JSON.parse(userJson);
```

### 3. Deep Copy (Simple Objects)

```js
const obj = { a: 1, b: { c: 2 } };
const copy = JSON.parse(JSON.stringify(obj)); // Deep copy

// âš ï¸ Warning: Doesn't work with functions, dates, undefined, circular refs
```

### 4. Pretty Printing

```js
console.log(JSON.stringify(obj, null, 2)); // Indented JSON
```

---

## Error Handling

### Invalid JSON

```js
try {
  JSON.parse("{ invalid json }");
} catch (error) {
  console.error("Invalid JSON:", error.message);
}
```

### Circular References

```js
const obj = { name: "John" };
obj.self = obj; // Circular

try {
  JSON.stringify(obj);
} catch (error) {
  console.error("Circular reference:", error.message);
}
```

---

## Important Notes

### âš ï¸ Circular References

```js
const obj = {};
obj.self = obj;
JSON.stringify(obj); // TypeError: Converting circular structure to JSON
```

### âš ï¸ Functions and Undefined

```js
JSON.stringify({
  func: function () {},
  undef: undefined,
}); // '{}' (both omitted)
```

### âš ï¸ Date Objects

```js
JSON.stringify({ date: new Date() });
// '{"date":"2023-01-01T00:00:00.000Z"}' (converted to string)
```

---

## Interview Common Questions

### Q: What does `JSON.stringify()` omit?

Functions, `undefined`, and Symbols are omitted from the output.

### Q: How to handle circular references?

Use a custom replacer or a library that handles circular references.

### Q: Difference between `JSON.stringify(obj, null, 2)` and `JSON.stringify(obj)`?

The `2` adds indentation (2 spaces) for pretty printing.

### Q: How to parse JSON with custom transformations?

Use a reviver function:

```js
JSON.parse(json, (key, value) => {
  // Custom transformation
  return value;
});
```

---

ðŸ“– **See Also:**

- [10. JSON/](../../10.%20JSON/) for comprehensive JSON documentation with advanced features and best practices
