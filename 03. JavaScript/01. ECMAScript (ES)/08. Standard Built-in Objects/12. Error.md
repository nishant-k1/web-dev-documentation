# ‚úÖ Must-Know `Error` Objects & Error Handling

JavaScript provides several built-in error constructors for handling different types of errors. Understanding these is **crucial** for debugging and error handling.

---

## Error Object Hierarchy

```
Error (base class)
‚îú‚îÄ‚îÄ ReferenceError
‚îú‚îÄ‚îÄ TypeError
‚îú‚îÄ‚îÄ SyntaxError
‚îú‚îÄ‚îÄ RangeError
‚îú‚îÄ‚îÄ URIError
‚îú‚îÄ‚îÄ EvalError (rarely used)
‚îî‚îÄ‚îÄ AggregateError (ES2021)
```

---

## 1. Base `Error` Object

### Creating Errors

```js
// Basic error
const error = new Error("Something went wrong");

// Error with custom properties
const error = new Error("Custom error");
error.code = "ERR_CUSTOM";
error.timestamp = Date.now();

// Error properties
console.log(error.name); // "Error"
console.log(error.message); // "Custom error"
console.log(error.stack); // Stack trace (non-standard, but widely supported)
```

### Error Properties

| Property  | Description                | Example                                   |
| --------- | -------------------------- | ----------------------------------------- |
| `name`    | Error type name            | `"Error"`, `"TypeError"`, etc.            |
| `message` | Error message string       | `"Cannot read property 'x' of undefined"` |
| `stack`   | Stack trace (non-standard) | Function call stack                       |

---

## 2. `ReferenceError` ‚≠ê‚≠ê‚≠ê

Thrown when trying to access a variable that doesn't exist.

```js
// Variable not declared
console.log(undefinedVar); // ReferenceError: undefinedVar is not defined

// Using variable before declaration (TDZ)
console.log(x); // ReferenceError: Cannot access 'x' before initialization
let x = 5;

// Try-catch example
try {
  console.log(undeclaredVar);
} catch (error) {
  console.error(error.name); // "ReferenceError"
  console.error(error.message); // "undeclaredVar is not defined"
}
```

**Common Causes:**

- Typos in variable names
- Accessing variables before declaration (TDZ)
- Accessing properties that don't exist (sometimes TypeError)

---

## 3. `TypeError` ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

Thrown when an operation is performed on the wrong type of value.

```js
// Calling non-function
const num = 42;
num(); // TypeError: num is not a function

// Reading properties of null/undefined
const obj = null;
obj.property; // TypeError: Cannot read property 'property' of null

// Accessing properties of primitive
const str = "hello";
str.property = "value"; // TypeError: Cannot create property 'property' on string

// Wrong method on type
const arr = [1, 2, 3];
arr.map(); // TypeError: undefined is not a function (if map is overwritten)

// Immutable object mutation attempt
Object.freeze({}).prop = "value"; // TypeError: Cannot add property 'prop'
```

**Common Causes:**

- Calling something that's not a function
- Accessing properties of `null` or `undefined`
- Attempting to modify read-only properties
- Wrong method on wrong type

---

## 4. `SyntaxError` ‚≠ê‚≠ê‚≠ê‚≠ê

Thrown when JavaScript code has syntax errors.

```js
// Invalid syntax
const obj = { name: "John"; } // SyntaxError: Unexpected token '}'

// Missing closing bracket
if (true) { // SyntaxError: Unexpected end of input

// Invalid JSON
JSON.parse('{ name: "John" }'); // SyntaxError: Expected property name

// Reserved word misuse
const class = "name"; // SyntaxError: Unexpected reserved word
```

**Common Causes:**

- Missing brackets, braces, or parentheses
- Invalid JSON syntax
- Using reserved words incorrectly
- Trailing commas in wrong places (old browsers)

**Note:** SyntaxError is often caught at parse time, before code execution.

---

## 5. `RangeError` ‚≠ê‚≠ê‚≠ê

Thrown when a value is outside the allowed range.

```js
// Array length too large
const arr = new Array(-1); // RangeError: Invalid array length

// Invalid array length
const arr = new Array(2 ** 32); // RangeError: Invalid array length

// Number method precision out of range
(123).toFixed(-1); // RangeError: toFixed() digits argument must be between 0 and 100

// Number method precision out of range
(123).toPrecision(101); // RangeError: toPrecision() argument must be between 1 and 100
```

**Common Causes:**

- Invalid array length
- Invalid number method arguments (toFixed, toPrecision)
- Invalid date values

---

## 6. `URIError` ‚≠ê‚≠ê

Thrown when URI encoding/decoding functions are used incorrectly.

```js
// Invalid URI encoding
decodeURIComponent("%"); // URIError: URI malformed

// Invalid URI
decodeURI("http://example.com/%E0%A4%A"); // URIError: URI malformed

// Encoding issues
decodeURIComponent("%FF"); // URIError: URI malformed (depending on context)
```

**Common Causes:**

- Invalid URI sequences in `decodeURI()` or `decodeURIComponent()`
- Encoding/decoding mismatches

---

## 7. `AggregateError` ‚≠ê‚≠ê‚≠ê (ES2021)

Represents multiple errors wrapped in a single error.

```js
// Promise.any() rejects with AggregateError when all promises reject
Promise.any([
  Promise.reject("Error 1"),
  Promise.reject("Error 2"),
  Promise.reject("Error 3"),
]).catch((error) => {
  console.error(error.name); // "AggregateError"
  console.error(error.errors); // ["Error 1", "Error 2", "Error 3"]
});

// Creating custom AggregateError
const aggregateError = new AggregateError(
  [new Error("Error 1"), new Error("Error 2")],
  "Multiple errors occurred"
);
```

**Properties:**

- `errors`: Array of error objects
- `message`: Main error message

---

## Error Handling Patterns

### Try-Catch-Finally

```js
try {
  // Risky code
  const result = riskyOperation();
  console.log(result);
} catch (error) {
  // Handle error
  if (error instanceof TypeError) {
    console.error("Type error:", error.message);
  } else if (error instanceof ReferenceError) {
    console.error("Reference error:", error.message);
  } else {
    console.error("Unknown error:", error);
  }
} finally {
  // Always executes
  console.log("Cleanup code");
}
```

### Custom Error Classes

```js
class ValidationError extends Error {
  constructor(message, field) {
    super(message);
    this.name = "ValidationError";
    this.field = field;
  }
}

class NotFoundError extends Error {
  constructor(resource) {
    super(`${resource} not found`);
    this.name = "NotFoundError";
    this.resource = resource;
  }
}

// Usage
try {
  if (!user.email) {
    throw new ValidationError("Email is required", "email");
  }
  if (!user.id) {
    throw new NotFoundError("User");
  }
} catch (error) {
  if (error instanceof ValidationError) {
    console.error(`Validation failed for ${error.field}: ${error.message}`);
  } else if (error instanceof NotFoundError) {
    console.error(`${error.resource} not found`);
  }
}
```

### Error Propagation

```js
function outerFunction() {
  try {
    innerFunction();
  } catch (error) {
    // Add context
    error.context = "outerFunction";
    throw error; // Re-throw with context
  }
}

function innerFunction() {
  throw new Error("Something went wrong");
}
```

---

## Common Interview Questions

### Q: Difference between `ReferenceError` and `TypeError`?

**ReferenceError:**

- Variable doesn't exist or can't be accessed
- Example: `console.log(undefinedVar)`

**TypeError:**

- Operation on wrong type
- Example: `null.property` or `42()`

### Q: When is `SyntaxError` thrown?

At parse time, before code execution. Usually indicates invalid JavaScript syntax.

### Q: How to create custom error types?

Extend the `Error` class and set `this.name`:

```js
class CustomError extends Error {
  constructor(message) {
    super(message);
    this.name = "CustomError";
  }
}
```

### Q: What is `AggregateError`?

Introduced in ES2021, represents multiple errors. Used by `Promise.any()` when all promises reject.

---

## Best Practices

‚úÖ **Do:**

- Use specific error types (TypeError, ReferenceError, etc.)
- Create custom error classes for domain-specific errors
- Include meaningful error messages
- Check error types with `instanceof`
- Add context when re-throwing errors

‚ùå **Don't:**

- Throw generic `Error` for everything
- Swallow errors silently (at least log them)
- Use `catch` without handling the error
- Modify built-in error objects

---

üìñ **See Also:**

- [29. Error Handling & Debugging](../../29.%20Error%20Handling%20&%20Debugging/) for comprehensive error handling patterns
- [18. Parameter Passing](../../18.%20Parameter%20Passing/) for error handling in functions

