# Understanding Side Effects and Function Purity in JavaScript

## ‚ùì What does ‚Äúoutside its own scope‚Äù mean?

When we say a function should not change _anything outside its own scope_, we are **not** talking about lexical scope.

### ‚úî Local scope

Variables **created inside** the function.

Changing these is **not** a side effect.

### ‚úî Lexical scope (outer scope)

Variables the function can _access_ because of closure, but **did not create**.

Changing these **is** a side effect.

### ‚úÖ Clear definition

A function has a **side effect** if it modifies **anything not created inside the function**.

Examples of side effects:

- Modifying outer lexical variables
- Modifying global variables
- Mutating arrays/objects defined outside
- Updating the DOM
- Logging to console
- Network requests
- Timer interactions
- Reading system state like `Date.now()` or `Math.random()`

---

## ‚ùì Is _interaction alone_ enough to make a function impure, or is mutation required?

### ‚úÖ Final Answer

**Interaction alone is enough to make a function impure. Mutation is NOT required.**

There are two ways a function becomes impure:

---

## 1Ô∏è‚É£ Mutation-Based Impurity

The function **changes external state**.

Examples:

```js
count++;
user.name = "Nishant";
arr.push(10);
document.body.innerHTML = "Hi";
```

---

## 2Ô∏è‚É£ Interaction-Based Impurity

The function **touches the outside world**, even without mutating anything.

Examples:

```js
console.log("Hi"); // I/O interaction
alert("Hello"); // UI interaction
fetch("/api"); // network interaction
Date.now(); // depends on system time
Math.random(); // depends on external entropy
```

‚û° These functions are **impure even without mutation**, because their behavior depends on or affects something external.

---

# üéØ Clean Interview Definitions

## ‚úî Pure Function

A function is pure if:

1. It has **no side effects**.
2. It does **not mutate** external state.
3. It does **not depend** on external state that can change.
4. It returns the **same output for the same input** every time.

### Example

```js
function sum(a, b) {
  return a + b; // pure
}
```

---

## ‚úî Impure Function

A function is impure if:

- It **mutates** outer/global state.
- It **interacts** with the outside world.
- It **relies on** external non-deterministic sources (`Date.now()`, `Math.random()`).
- Its output is not consistent for the same input.

### Example

```js
function logSum(a, b) {
  console.log(a + b); // impure (interaction)
  return a + b;
}
```

---

# üß† Ultimate Memory Trick

- **Mutation = Changing the outside world**
- **Interaction = Touching the outside world**
- It **relies on** external non-deterministic sources (`Date.now()`, `Math.random()`).

üëâ **Both make a function impure.**
