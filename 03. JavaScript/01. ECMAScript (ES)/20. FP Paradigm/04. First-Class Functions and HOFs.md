# FP Core Principles: First-Class Functions and HOFs

## First-Class Functions

In JavaScript, functions are first-class citizens, which means:

- Functions can be assigned to variables
- Functions can be passed as arguments to other functions
- Functions can be returned from other functions
- Functions can be stored in data structures

```js
// Assigned to variable
const greet = function (name) {
  return `Hello ${name}`;
};

// Passed as argument
function execute(fn) {
  return fn();
}

// Returned from function
function createGreeter() {
  return function (name) {
    return `Hello ${name}`;
  };
}
```

---

## Higher-Order Functions (HOFs)

A Higher-Order Function (HOF) in JavaScript is a function that does at least one or both of the following:

- Takes one or more functions as arguments (callbacks).
- Returns a new function (often newly created or a modified version of an input function).

### Additional Clarifications

- The callback function does not need to be executed inside the HOF. Simply receiving a function as an argument qualifies it as a HOF.
- Even if a function does not take a function as an argument but returns another function, it is still considered a HOF.
- If a function receives a callback and returns a modified version of that callback (e.g., by wrapping or enhancing it), it is also a HOF.

---

## Examples

### HOF Example 1

```javascript
// HOF 1
const hof = () => () => 5;
hof()(); // returns 5
```

### HOF Example 2

```javascript
// HOF 2
const hof = (fn) => fn(5);
hof(function callback(x) {
  return x;
}); // returns 5
```

---

## Callback Functions

A function only acts as a callback if it is passed as an argument and is meant to be invoked by the function it's passed into.

### Additional Clarifications

- A function is considered a callback only when the receiving function (the HOF) is expected to call it—either immediately or eventually.
- If the passed function doesn't get invoked inside the body of the HOF, then it would not be called as callback function. It's simply a function being passed and returned—but not being used as a callback.
- A function is considered a callback only when the receiving function (the HOF) is expected to call it—either immediately or eventually.

---

## Higher-Order Functions vs Callback Functions

### Higher-Order Functions

A higher-order function is a function that can take one or more functions as arguments or can return a function as its result. In other words, it treats functions as first-class citizens.

```JavaScript
function higherOrderFunction(callback) {
  console.log("This is the higher-order function");
  callback(); // This is where the callback function is called
}

function callbackFunction() {
  console.log("This is the callback function");
}

higherOrderFunction(callbackFunction);
```

### Callback Functions

A callback function is a function that is passed as an argument to another function and is executed inside the body of that another function after some operation is completed. It's a way to ensure that certain code doesn't execute until a particular task is finished.

```JavaScript
function doSomethingAsync(callback) {
  setTimeout(function() {
    console.log("Async operation done");
    callback();
  }, 2000);
}

function onComplete() {
  console.log("Callback called");
}

doSomethingAsync(onComplete);
```

---

## Closures

- Closures in JavaScript are a mechanism for containing some sort of state, and in JavaScript we create a closure whenever a function accesses a variable defined outside of the immediate function scope.
- A closure is a function that has access to its own scope, the outer function's scope, and the global scope, even after the outer function has finished execution.
- A function along with its lexical scope is called closure.
- A closure is a fundamental concept in JavaScript that allows a function to remember and access its lexical scope (the variables in its outer scope) even after the function has finished executing and has been returned.

```JavaScript
function outerFunction(outerVariable) {
  // Inner function has access to outerVariable due to closure
  function innerFunction(innerVariable) {
    console.log(outerVariable + innerVariable);
  }
  return innerFunction;
}

const closureExample = outerFunction(3); // outerVariable is now 3

closureExample(2); // Output: 5   // innerFunction uses outerVariable, even after outerFunction has finished executing.
```

---

## Common HOFs in JavaScript

### Array Methods

```js
[1, 2, 3].map((x) => x * 2); // HOF: takes function as argument
[1, 2, 3].filter((x) => x > 1); // HOF: takes function as argument
[1, 2, 3].reduce((acc, x) => acc + x, 0); // HOF: takes function as argument
```

### Function Utilities

```js
// setTimeout, setInterval are HOFs
setTimeout(() => console.log("Hi"), 1000);

// Event listeners
button.addEventListener("click", handler); // handler is callback
```

---

## Interview Points

- First-class functions enable functional programming patterns
- HOFs abstract common patterns and make code more reusable
- Callbacks are functions passed to HOFs to be executed
- Closures allow functions to access outer scope variables
- JavaScript's array methods (`map`, `filter`, `reduce`) are all HOFs
- HOFs enable function composition and higher-level abstractions
