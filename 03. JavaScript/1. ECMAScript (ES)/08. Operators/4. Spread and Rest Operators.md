# Spread and Rest Syntax

> **Important:** Spread (`...`) and Rest (`...`) are **syntactic constructs (syntax forms)**, not operators. They are part of JavaScript's syntax, similar to how `[]` for arrays or `{}` for objects are syntax, not operators.

---

## Key Distinction: Syntax vs Operators

### Why They're Not Operators

- **Operators** perform evaluation and return values (e.g., `+`, `-`, `*`, `&&`)
- **Spread/Rest** reshape data structures at compile time â€” they don't evaluate values the way operators do
- They change structure and behavior, not perform mathematical or logical operations

### Classification

| Type          | Examples                | Purpose                 |
| ------------- | ----------------------- | ----------------------- | --- | -------------------------- |
| **Operators** | `+`, `-`, `*`, `&&`, `  |                         | `   | Evaluate and return values |
| **Syntax**    | `...`, `[]`, `{}`, `()` | Reshape data structures |

---

## Spread Syntax (`...`)

**Purpose:** Expands (spreads out) iterable values into individual elements.

### 1. Array Spread

#### Basic Usage

```javascript
// Spreading an array into individual elements
let arr1 = [1, 2, 3];
let arr2 = [4, 5, 6];
let combined = [...arr1, ...arr2];
// Result: [1, 2, 3, 4, 5, 6]

// Adding elements
let newArr = [0, ...arr1, 4];
// Result: [0, 1, 2, 3, 4]
```

#### Copying Arrays

```javascript
// Shallow copy
let original = [1, 2, 3];
let copy = [...original];
copy.push(4);
// original: [1, 2, 3]
// copy: [1, 2, 3, 4]
```

#### Merging Arrays

```javascript
let arr1 = [1, 2];
let arr2 = [3, 4];
let arr3 = [5, 6];
let merged = [...arr1, ...arr2, ...arr3];
// Result: [1, 2, 3, 4, 5, 6]
```

#### Function Arguments

```javascript
function sum(a, b, c) {
  return a + b + c;
}

let numbers = [1, 2, 3];
sum(...numbers); // 6
// Equivalent to: sum(1, 2, 3)
```

#### Math Functions

```javascript
let numbers = [5, 2, 8, 1, 9];
Math.max(...numbers); // 9
Math.min(...numbers); // 1

// Without spread (old way)
Math.max.apply(null, numbers); // 9
```

### 2. Object Spread

#### Basic Usage

```javascript
// Spreading object properties
let obj1 = { a: 1, b: 2 };
let obj2 = { c: 3, d: 4 };
let combined = { ...obj1, ...obj2 };
// Result: { a: 1, b: 2, c: 3, d: 4 }
```

#### Copying Objects

```javascript
// Shallow copy
let original = { name: "John", age: 30 };
let copy = { ...original };
copy.age = 31;
// original: { name: "John", age: 30 }
// copy: { name: "John", age: 31 }
```

#### Overriding Properties

```javascript
let defaults = { theme: "light", fontSize: 14 };
let userPrefs = { fontSize: 16 };
let config = { ...defaults, ...userPrefs };
// Result: { theme: "light", fontSize: 16 }
// userPrefs overrides defaults
```

#### Adding Properties

```javascript
let person = { name: "John", age: 30 };
let withEmail = { ...person, email: "john@example.com" };
// Result: { name: "John", age: 30, email: "john@example.com" }
```

### 3. String Spread

```javascript
let str = "hello";
let chars = [...str];
// Result: ["h", "e", "l", "l", "o"]

// Useful for string manipulation
let reversed = [...str].reverse().join("");
// Result: "olleh"
```

### 4. Spread in React (Common Use Case)

```javascript
// Spreading props
function Button(props) {
  return <button {...props}>Click me</button>;
}

// Merging props
function CustomButton({ className, ...otherProps }) {
  return <button className={`btn ${className}`} {...otherProps} />;
}
```

---

## Rest Syntax (`...`)

**Purpose:** Collects (gathers) multiple elements into a single array or object.

### 1. Rest Parameters in Functions

#### Collecting Arguments

```javascript
// Collecting all arguments into an array
function sum(...numbers) {
  return numbers.reduce((total, num) => total + num, 0);
}

sum(1, 2, 3, 4); // 10
sum(5, 10); // 15
```

#### Combining with Regular Parameters

```javascript
function greet(greeting, ...names) {
  return names.map((name) => `${greeting}, ${name}!`).join(" ");
}

greet("Hello", "John", "Jane", "Bob");
// Result: "Hello, John! Hello, Jane! Hello, Bob!"
```

#### Rest Must Be Last Parameter

```javascript
// âœ… Correct
function example(a, b, ...rest) {
  // ...
}

// âŒ Syntax Error
function example(...rest, a) {
  // SyntaxError: Rest parameter must be last formal parameter
}
```

### 2. Array Destructuring with Rest

#### Collecting Remaining Elements

```javascript
let [first, second, ...rest] = [1, 2, 3, 4, 5];
// first: 1
// second: 2
// rest: [3, 4, 5]

// Skipping elements
let [first, , third, ...rest] = [1, 2, 3, 4, 5];
// first: 1
// third: 3
// rest: [4, 5]
```

#### With Default Values

```javascript
let [first = 0, ...rest] = [];
// first: 0
// rest: []
```

### 3. Object Destructuring with Rest

#### Collecting Remaining Properties

```javascript
let { name, age, ...otherProps } = {
  name: "John",
  age: 30,
  city: "NYC",
  country: "USA",
};
// name: "John"
// age: 30
// otherProps: { city: "NYC", country: "USA" }
```

#### Removing Properties

```javascript
let user = { name: "John", age: 30, password: "secret" };
let { password, ...publicUser } = user;
// publicUser: { name: "John", age: 30 }
// password is excluded
```

---

## Key Differences: Spread vs Rest

| Aspect        | Spread (`...`)                        | Rest (`...`)                               |
| ------------- | ------------------------------------- | ------------------------------------------ |
| **Context**   | Function calls, array/object literals | Function parameters, destructuring         |
| **Purpose**   | Expands/separates elements            | Collects/gathers elements                  |
| **Direction** | Outward (spreading out)               | Inward (collecting in)                     |
| **Position**  | Right side of `=` or in function call | Left side of `=` or in function parameters |

### Visual Comparison

```javascript
// SPREAD: Expanding outward
let arr = [1, 2, 3];
let expanded = [...arr, 4, 5];
// [1, 2, 3] â†’ 1, 2, 3 â†’ [1, 2, 3, 4, 5]

// REST: Collecting inward
let [first, ...rest] = [1, 2, 3, 4, 5];
// 1, 2, 3, 4, 5 â†’ first: 1, rest: [2, 3, 4, 5]
```

---

## Common Patterns and Use Cases

### Pattern 1: Function Overloading

```javascript
function createUser(name, email, ...additionalInfo) {
  return {
    name,
    email,
    ...additionalInfo, // Spread to merge additional properties
  };
}

createUser("John", "john@example.com", { age: 30, city: "NYC" });
// Result: { name: "John", email: "john@example.com", age: 30, city: "NYC" }
```

### Pattern 2: Immutable Updates

```javascript
// Updating object immutably
let user = { name: "John", age: 30 };
let updated = { ...user, age: 31 };
// Creates new object, doesn't mutate original

// Updating array immutably
let items = [1, 2, 3];
let newItems = [...items, 4];
// Creates new array, doesn't mutate original
```

### Pattern 3: Default Values with Overrides

```javascript
function createConfig(userConfig) {
  const defaults = {
    theme: "light",
    fontSize: 14,
    language: "en",
  };

  return { ...defaults, ...userConfig };
}

createConfig({ fontSize: 16 });
// Result: { theme: "light", fontSize: 16, language: "en" }
```

### Pattern 4: Removing Properties

```javascript
function removeProperty(obj, propToRemove) {
  const { [propToRemove]: removed, ...rest } = obj;
  return rest;
}

let user = { name: "John", age: 30, password: "secret" };
let safe = removeProperty(user, "password");
// Result: { name: "John", age: 30 }
```

### Pattern 5: Flattening Arrays

```javascript
let arrays = [
  [1, 2],
  [3, 4],
  [5, 6],
];
let flattened = [].concat(...arrays);
// Or with flat()
let flattened2 = arrays.flat();
// Result: [1, 2, 3, 4, 5, 6]
```

### Pattern 6: Converting Arguments Object

```javascript
// Old way
function oldWay() {
  let args = Array.prototype.slice.call(arguments);
  // ...
}

// Modern way with rest
function newWay(...args) {
  // args is already an array
  // ...
}
```

---

## Important Notes

### 1. Shallow Copying

```javascript
// Arrays: Shallow copy
let arr = [
  [1, 2],
  [3, 4],
];
let copy = [...arr];
copy[0].push(5);
// arr[0] is also affected: [[1, 2, 5], [3, 4]]

// Objects: Shallow copy
let obj = { nested: { value: 1 } };
let copy = { ...obj };
copy.nested.value = 2;
// obj.nested.value is also affected: 2
```

### 2. Only Works with Iterables

```javascript
// âœ… Works with arrays, strings, objects
[...[1, 2, 3]]        // [1, 2, 3]
[..."hello"]          // ["h", "e", "l", "l", "o"]
{...{a: 1}}           // {a: 1}

// âŒ Doesn't work with non-iterables
[...123]              // TypeError: 123 is not iterable
[...null]             // TypeError: null is not iterable
[...undefined]        // TypeError: undefined is not iterable
```

### 3. Order Matters in Object Spread

```javascript
let obj1 = { a: 1, b: 2 };
let obj2 = { b: 3, c: 4 };

// Later properties override earlier ones
{ ...obj1, ...obj2 }  // { a: 1, b: 3, c: 4 }
{ ...obj2, ...obj1 }  // { b: 2, c: 4, a: 1 }
```

### 4. Rest in Destructuring Must Be Last

```javascript
// âœ… Correct
let [a, b, ...rest] = [1, 2, 3, 4];

// âŒ Syntax Error
let [...rest, a, b] = [1, 2, 3, 4];
// SyntaxError: Rest element must be last element
```

---

## Type Coercion

Spread and Rest work with **iterable** values:

- **Arrays**: Iterable
- **Strings**: Iterable (spreads to characters)
- **Objects**: Iterable (spreads to key-value pairs in ES2018+)
- **Sets**: Iterable
- **Maps**: Iterable (keys or values)
- **NodeLists**: Iterable

```javascript
// String spreading
let chars = [..."hello"]; // ["h", "e", "l", "l", "o"]

// Set spreading
let set = new Set([1, 2, 3]);
let arr = [...set]; // [1, 2, 3]

// Map spreading (keys)
let map = new Map([
  ["a", 1],
  ["b", 2],
]);
let keys = [...map.keys()]; // ["a", "b"]
```

---

## Summary

### Spread Syntax (`...`)

- **Expands** iterables into individual elements
- Used in: function calls, array/object literals
- Creates shallow copies
- Merges arrays/objects

### Rest Syntax (`...`)

- **Collects** elements into arrays/objects
- Used in: function parameters, destructuring
- Must be last in parameter list or destructuring pattern
- Collects remaining elements

### Key Takeaways

1. Spread and Rest are **syntax**, not operators
2. Spread **expands** (outward), Rest **collects** (inward)
3. Both use the same `...` syntax but in different contexts
4. Rest must always be last in its context
5. Creates **shallow copies**, not deep copies
6. Works with **iterable** values

---

> ðŸ“– **Related Topics:**
>
> - [1. Operators](./1.%20Operators.md) - Overview of operators (note: spread/rest are syntax, not operators)
> - [3. Declarations, Initializations, and Assignments](../3.%20Declarations,%20Initializations,%20and%20Assignments/) - Destructuring patterns
