# âœ… Must-Know `addEventListener` â­â­â­

`addEventListener` is the modern, recommended way to attach event handlers to DOM elements. It's part of the Web APIs provided by the browser.

---

## Basic Syntax

```js
element.addEventListener(eventType, callback, options);
```

**Parameters:**

- `eventType`: Event name (e.g., `"click"`, `"change"`, `"submit"`)
- `callback`: Function to execute when event occurs
- `options`: Optional object with `capture`, `once`, `passive`, `signal`

---

## Basic Usage

```js
const button = document.querySelector("button");

button.addEventListener("click", () => {
  console.log("Button clicked!");
});

// With event object
button.addEventListener("click", (event) => {
  console.log(event.target); // Element that triggered event
  console.log(event.type); // "click"
});
```

---

## Multiple Listeners

`addEventListener` allows **multiple listeners** on the same element:

```js
const button = document.querySelector("button");

button.addEventListener("click", () => console.log("First"));
button.addEventListener("click", () => console.log("Second"));
button.addEventListener("click", () => console.log("Third"));

// All three execute when clicked
```

---

## Removing Event Listeners

Use `removeEventListener` with the **same function reference**:

```js
function handleClick() {
  console.log("Clicked!");
}

button.addEventListener("click", handleClick);
button.removeEventListener("click", handleClick); // âœ… Removed

// âŒ Anonymous functions can't be removed easily
button.addEventListener("click", () => console.log("Can't remove"));
// No way to remove this without keeping reference
```

---

## Event Options

### capture (Phase)

```js
// Capture phase (descending: window â†’ document â†’ element)
button.addEventListener("click", handler, { capture: true });

// Bubble phase (default, ascending: element â†’ document â†’ window)
button.addEventListener("click", handler); // or { capture: false }
```

### once (Execute Once)

```js
// Listener executes only once, then auto-removes
button.addEventListener("click", handler, { once: true });
```

### passive (Performance)

```js
// Indicates listener won't call preventDefault()
// Enables browser optimizations (smooth scrolling)
button.addEventListener("touchstart", handler, { passive: true });
```

### signal (AbortController)

```js
const controller = new AbortController();

button.addEventListener("click", handler, {
  signal: controller.signal,
});

// Remove listener
controller.abort();
```

---

## Event Object

The callback receives an `Event` object:

```js
button.addEventListener("click", (event) => {
  event.target; // Element that triggered event
  event.currentTarget; // Element listener is attached to
  event.type; // Event type ("click")
  event.preventDefault(); // Prevent default behavior
  event.stopPropagation(); // Stop event bubbling
  event.stopImmediatePropagation(); // Stop other listeners
});
```

### Common Event Properties

```js
// Mouse events
event.clientX; // X coordinate relative to viewport
event.clientY; // Y coordinate relative to viewport
event.button; // Mouse button (0=left, 1=middle, 2=right)

// Keyboard events
event.key; // Key pressed ("a", "Enter", "ArrowUp")
event.code; // Physical key code ("KeyA", "Enter")
event.ctrlKey; // Ctrl key pressed
event.shiftKey; // Shift key pressed

// Form events
event.target.value; // Input value
event.target.checked; // Checkbox/radio checked state
```

---

## Event Phases

### 1. Capture Phase (Top to Bottom)

```js
document.addEventListener("click", handler, { capture: true });
// Executes before target element's handlers
```

### 2. Target Phase

```js
button.addEventListener("click", handler);
// Executes at target element
```

### 3. Bubble Phase (Bottom to Top)

```js
document.addEventListener("click", handler); // Default
// Executes after target element's handlers
```

---

## Common Patterns

### Event Delegation

Attach listener to parent, handle events from children:

```js
const list = document.querySelector("ul");

list.addEventListener("click", (event) => {
  if (event.target.tagName === "LI") {
    console.log("List item clicked:", event.target.textContent);
  }
});
```

**Benefits:**

- Works with dynamically added elements
- Fewer event listeners (better performance)
- Simpler code

### Prevent Default

```js
form.addEventListener("submit", (event) => {
  event.preventDefault(); // Prevent form submission
  // Handle form manually
});
```

### Stop Propagation

```js
button.addEventListener("click", (event) => {
  event.stopPropagation(); // Prevents bubbling to parent
  console.log("Button clicked, but parent won't receive event");
});
```

---

## Common Event Types

### Mouse Events

```js
element.addEventListener("click", handler);
element.addEventListener("dblclick", handler);
element.addEventListener("mousedown", handler);
element.addEventListener("mouseup", handler);
element.addEventListener("mouseover", handler);
element.addEventListener("mouseout", handler);
element.addEventListener("mousemove", handler);
```

### Keyboard Events

```js
element.addEventListener("keydown", handler);
element.addEventListener("keyup", handler);
element.addEventListener("keypress", handler); // Deprecated
```

### Form Events

```js
input.addEventListener("change", handler); // Value changed and blurred
input.addEventListener("input", handler); // Value changed (real-time)
input.addEventListener("focus", handler);
input.addEventListener("blur", handler);
input.addEventListener("submit", handler); // Form only
```

### Window Events

```js
window.addEventListener("load", handler); // Page fully loaded
window.addEventListener("DOMContentLoaded", handler); // DOM ready
window.addEventListener("resize", handler);
window.addEventListener("scroll", handler);
```

---

## Interview Common Questions

### Q: Difference between addEventListener and onclick?

**addEventListener:**

- âœ… Supports multiple listeners
- âœ… Can use options (capture, once, passive)
- âœ… Better for modern code
- âœ… Recommended approach

**onclick (property assignment):**

- âŒ Overwrites previous handlers
- âŒ No options
- âŒ Older approach
- âŒ Only one handler per element

```js
// addEventListener - multiple handlers
button.addEventListener("click", handler1);
button.addEventListener("click", handler2); // Both execute

// onclick - overwrites
button.onclick = handler1;
button.onclick = handler2; // Only handler2 executes
```

### Q: What is event delegation?

Attaching a listener to a parent element to handle events from child elements. Benefits: works with dynamically added elements, fewer listeners, better performance.

```js
const list = document.querySelector("ul");
list.addEventListener("click", (event) => {
  if (event.target.tagName === "LI") {
    // Handle click on any <li>
  }
});
```

### Q: How to remove an event listener?

Use `removeEventListener` with the **exact same function reference**:

```js
function handler() {
  console.log("Clicked");
}

button.addEventListener("click", handler);
button.removeEventListener("click", handler); // âœ… Works

// âŒ Anonymous function can't be removed
button.addEventListener("click", () => console.log("Can't remove"));
```

### Q: What are event phases?

1. **Capture**: Event travels from window down to target
2. **Target**: Event reaches target element
3. **Bubble**: Event travels from target up to window (default)

### Q: How does preventDefault() work?

Prevents the default browser behavior for an event:

```js
form.addEventListener("submit", (event) => {
  event.preventDefault(); // Stops form submission
});
```

---

ðŸ“– **See Also:**

- [Events/](./Events/) for specific event types (Mouse, Keyboard, Form, etc.)
- [DOM/](./DOM/) for DOM manipulation
