# The new reconciliation process

ğŸ”¹ The Old Explanation (Still Conceptually Correct)

You probably learned:

- Component updates
- New Virtual DOM tree is created
- New vDOM is diffed with old vDOM
- Differences are applied to real DOM

That model is conceptually correct.

But internally, React doesnâ€™t literally build two separate â€œvirtual DOM treesâ€ and diff them like plain objects anymore.

That was React pre-Fiber.

---

ğŸ”¹ What Actually Happens Now (Fiber Architecture)

React still does reconciliation.

But instead of:

old vDOM vs new vDOM diff

It does:

current Fiber tree vs work-in-progress Fiber tree comparison

So:

- React keeps a current Fiber tree (represents whatâ€™s on screen)
- During render phase, it builds a work-in-progress Fiber tree
- While building it, React compares it with the current tree
- It marks what needs to change

This comparison process is the modern form of reconciliation.

Reconciliation was NOT removed.  
It was reimplemented using Fiber.

---

ğŸ”¹ So What Is Fiber?

Fiber is basically:

A node-based data structure that represents each component in the tree.

Each Fiber node stores:

- Type
- Props
- State
- Hook data
- Effect tags
- Child / sibling references

It replaces the old simple virtual DOM object structure.

---

ğŸ”¹ So Is Virtual DOM Gone?

No.

Fiber is the modern virtual DOM.

When people say â€œvirtual DOMâ€, they mean:

An in-memory representation of UI before updating the real DOM.

Fiber is that representation.

---

ğŸ”¹ Where Does Diffing Happen Now?

Diffing happens during the render phase while React builds the work-in-progress Fiber tree.

It compares:

- Element type
- Keys
- Props

And decides:

- Reuse node
- Update node
- Delete node
- Insert node

This is reconciliation.

---

ğŸ”¹ So Letâ€™s Connect Everything Clearly

Render Phase:

- Build work-in-progress Fiber tree
- Compare with current Fiber tree
- Mark changes (effect flags)

Commit Phase:

- Apply marked changes to real DOM

ğŸ”¹ Your Old Mental Model vs Modern Model

**Old Model:**
`New vDOM â†’ diff â†’ patch DOM`

**Modern Fiber Model:**

```text
Build work-in-progress Fiber tree
    â†“
Compare with current Fiber tree
    â†“
Mark updates
    â†“
Commit DOM mutations
```

Same concept.
More advanced architecture.

ğŸ”¹ Why Fiber Was Introduced

Because old reconciliation was:

- Synchronous
- Non-interruptible
- Blocking

Fiber allows:

- Pausing
- Prioritizing updates
- Concurrent rendering
- Scheduling

Itâ€™s reconciliation 2.0.

---

ğŸ”¹ Final Clean Answer

Reconciliation is NOT discarded.

Virtual DOM is NOT discarded.

Fiber is the modern implementation of the virtual DOM and reconciliation algorithm.
