# Commit phase

Updating the real DOM is NOT part of the render phase or reconciliation.
It is part of the commit phase.

Takes the already calculated changes
And applies them to the real DOM.

No more diffing.
No more reconciliation.
Just applying the work.

## Commit Phase Has 3 Steps

1ï¸âƒ£ Before Mutation (rarely discussed)
React prepares to apply changes. This is mostly internal bookkeeping.

2ï¸âƒ£ Mutation Phase
This is the real DOM update.

React will:

- Insert DOM nodes
- Update attributes
- Remove nodes
- Update text content

This corresponds to:
`Commit DOM mutations`
Now the real DOM matches the work-in-progress Fiber tree.

**Still not painted yet.**

3ï¸âƒ£ Layout Effects Phase

Immediately after DOM mutation:

- useLayoutEffect cleanup runs
- useLayoutEffect callbacks run

This happens:

- After DOM updated
- Before browser paint
- Synchronously

You can safely measure layout here.

---

4ï¸âƒ£ Paint Happens (Browser controlled)

The browser now renders pixels.

User sees the update.

---

5ï¸âƒ£ Passive Effects Phase

After paint:

- useEffect cleanup runs
- useEffect callbacks run

This is asynchronous and non-blocking.

ğŸ”¹ Full Timeline

```text
Render Phase
  - Build work-in-progress Fiber tree
  - Compare with current Fiber tree
  - Mark updates

Commit Phase
  - Apply DOM mutations
  - Run useLayoutEffect
  - Browser paints
  - Run useEffect
```

ğŸ”¹ Important Properties of Commit Phase

- It is synchronous
- It cannot be paused
- It must complete once started
- It is usually very fast

ğŸ”¹ Why Separation Exists

Because React wants:

Render phase â†’ Pure and interruptible  
Commit phase â†’ Fast and deterministic

This separation is what allows concurrent rendering.

---

ğŸ”¹ Final Definition

Commit phase is:

The phase where React takes the already reconciled Fiber tree and synchronizes the real DOM and effects with it.

No diffing happens here.

Diffing already finished during render.

## I don't see anything explicitlly mentioned about the commit pahs ein react documento or is it?

Thatâ€™s a very sharp observation.

Youâ€™re right â€” Reactâ€™s modern documentation (react.dev) does not heavily emphasize the term â€œCommit Phase.â€

But that doesnâ€™t mean it doesnâ€™t exist.

Letâ€™s clarify whatâ€™s happening.

---

ğŸ”¹ Why You Donâ€™t See â€œCommit Phaseâ€ Much in Docs

React docs today focus on:

- Writing components
- Effects
- State
- Rendering behavior

They intentionally avoid deep internal architecture terminology like:

- Fiber
- Reconciliation internals
- Commit phase

Because most developers donâ€™t need that level of detail.

---

ğŸ”¹ But Is Commit Phase Real?

Yes â€” absolutely.

Itâ€™s part of Reactâ€™s internal architecture and is mentioned in:

- Older React docs (legacy.reactjs.org)
- React RFCs
- React source code
- React conference talks by the core team

For example, the legacy docs explicitly describe:

Render Phase  
Commit Phase

Even Dan Abramov has explained this separation in multiple talks.

---

ğŸ”¹ Why Modern Docs Avoid the Term

Because React now explains behavior like this instead:

- â€œAfter React updates the DOMâ€¦â€
- â€œAfter paintâ€¦â€
- â€œDuring renderingâ€¦â€

They describe behavior without naming the phases formally.

But the architecture underneath still follows:

Render â†’ Commit

---

ğŸ”¹ Where You Still See It Clearly

If you read about:

- useLayoutEffect
- useEffect
- StrictMode double rendering
- Concurrent rendering

Youâ€™ll see language like:

- â€œAfter React commits changes to the DOMâ€
- â€œAfter the screen updatesâ€

That word commit is not accidental.

It refers to the commit phase.

---

ğŸ”¹ Internal Architecture Still Uses It

In React source code, youâ€™ll literally see:

- commitRoot
- commitMutationEffects
- commitLayoutEffects
- commitPassiveEffects

So yes â€” itâ€™s real, just abstracted away in public docs.

---

ğŸ”¹ Why This Separation Is Fundamental

Without render/commit separation:

- Concurrent rendering would be impossible
- React couldnâ€™t pause work
- StrictMode double render wouldn't work
- Effects timing wouldnâ€™t make sense

The entire modern React architecture depends on it.

## So, two major phases before user sees anything on the screen render phase commit phase Right?

Youâ€™re very close â€” just one small but important correction.

Not both phases happen before the user sees something.

The correct structure is:

âœ… React Has Two Major Phases

1ï¸âƒ£ Render Phase  
2ï¸âƒ£ Commit Phase

That part is correct.

---

â— But Hereâ€™s The Precise Timing

Letâ€™s break it relative to what the user sees.

---

ğŸ”¹ Render Phase

- React runs components
- Builds work-in-progress Fiber tree
- Compares with current tree
- Marks updates

âŒ No DOM updates  
âŒ Nothing visible  
âŒ User sees nothing new

So yes â€” render phase happens before the user sees anything.

---

ğŸ”¹ Commit Phase

This phase has sub-steps:

- React mutates the real DOM
- useLayoutEffect runs
- Browser paints (user sees changes)
- useEffect runs

Now hereâ€™s the key:

ğŸ‘‰ The user sees changes during the commit phase, specifically after DOM mutation and paint.

So commit phase is partly before paint and partly after paint.

ğŸ”¹ Clean Timeline

```text
Render Phase
  - Pure calculation
  - No DOM changes

Commit Phase
  - Apply DOM mutations
  - Run useLayoutEffect
  - Browser paints (user sees update)
  - Run useEffect
```

ğŸ”¹ So Correct Final Statement

Instead of:

Two major phases before user sees anything

The accurate version is:

React has two major phases:

Render phase (calculation)  
Commit phase (apply changes and run effects)

The user sees updates during the commit phase.
