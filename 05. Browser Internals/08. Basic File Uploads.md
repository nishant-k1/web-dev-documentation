# Basic File Uploads

Understanding how file uploads work in HTML and JavaScript.

---

## `<input type="file">` Behavior

**Critical Truth:** `<input type="file">` does **NOT** make any HTTP request by itself.

- It only opens a file picker
- Selecting a file does **NOT** upload it
- The file stays on the user's computer until **YOU** send it

---

## How Files Are Actually Uploaded

### Method 1: Form Submission (Classic HTML)

```html
<form action="/upload" method="POST" enctype="multipart/form-data">
  <input type="file" name="avatar" />
  <button type="submit">Upload</button>
</form>
```

When user clicks "Upload", browser sends:

```
POST /upload
Content-Type: multipart/form-data

[file bytes in body]
```

### Method 2: JavaScript (Modern Approach)

```javascript
const file = document.querySelector("input[type=file]").files[0];
const formData = new FormData();
formData.append("avatar", file);

fetch("/upload", {
  method: "POST",
  body: formData,
});
```

**Note:** Do NOT set `Content-Type` header manually when using `FormData`. The browser sets it automatically with the correct boundary.

---

## File Input Attributes

```html
<!-- Multiple files -->
<input type="file" multiple />

<!-- Accept only images -->
<input type="file" accept="image/*" />

<!-- Accept only PDFs -->
<input type="file" accept="application/pdf" />
```

---

## Security Restrictions

- ❌ Cannot read the selected file's path (browser hides it for security)
- ❌ Cannot auto-upload without user interaction
- ❌ Cannot pre-fill a file input (`value` attribute is forbidden)
- ❌ JavaScript can't read file contents without `FileReader` API

---

## Synchronous vs Asynchronous Behavior

- **Selecting a file** = Instant, no network request, no sync/async
- **Upload happens ONLY when:**
  - Form is submitted → HTTP POST (sync for old pages, full reload)
  - JS `fetch()`/`axios` → Async

`<input type="file">` does **NOT** participate in HTML loading behavior (blocking/async/preload/render-blocking). It's just an interactive input.

---

## Related Topics

- [POST Request Content Types](./6.%20POST%20Request%20Content%20Types.md) - Understanding `multipart/form-data`
- [Form Submissions](./5.%20Form%20Submissions.md) - How forms send data
- [Browser Security](./18.%20Browser%20Security.md) - Security restrictions explained
